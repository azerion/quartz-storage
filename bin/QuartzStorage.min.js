/*!
 * QuartzStorage - version 2.0.0 
 * Cross browser/platform safe localStorage implementation
 *
 * Gembly
 * Build at 19-08-2015
 * Released under GNUv3 License 
 */

var Quartz;!function(a){var b=function(){function b(a){this.namespace="",this.setNamespace(a)}return Object.defineProperty(b.prototype,"length",{get:function(){var b=Object.keys(localStorage);return a.Storage.nameSpaceKeyFilter(b,this.namespace).length},enumerable:!0,configurable:!0}),b.prototype.getItem=function(a){return localStorage.getItem(this.namespace+a)},b.prototype.setItem=function(a,b){localStorage.setItem(this.namespace+a,b)},b.prototype.deleteItem=function(a){localStorage.removeItem(this.namespace+a)},b.prototype.empty=function(){for(var b=Object.keys(localStorage),c=a.Storage.nameSpaceKeyFilter(b,this.namespace),d=0;d<c.length;d++)localStorage.removeItem(c[d])},b.prototype.setNamespace=function(a){a&&(this.namespace=a+":")},b}();a.LocalStorage=b}(Quartz||(Quartz={}));var Quartz;!function(a){var b=function(){function b(){this.store=null;try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","foo"),localStorage.removeItem("testingLocalStorage"),this.store=new a.LocalStorage("Quartz")):this.store=new a.CookieStorage("Quartz")}catch(b){this.store=new a.CookieStorage("Quartz")}return this}return b.getInstance=function(){return null===a.Storage.instance&&(a.Storage.instance=new a.Storage),a.Storage.instance},b.nameSpaceKeyFilter=function(a,b){return a.filter(function(a){return a.substring(0,b.length)===b})},b.prototype.setNamespace=function(a){if(null===this.store)throw new Error("No storage available, unable to set namespace: "+a);return this.store.setNamespace(a),this},b.prototype.get=function(a){if(null===this.store)throw new Error("No storage available, unable to get key: "+a);return this.store.getItem(a)},b.prototype.set=function(a,b){if(null===this.store)throw new Error("No storage available, unable to set key: "+a);return this.store.setItem(a,b),this},b.instance=null,b}();a.Storage=b}(Quartz||(Quartz={}));var Quartz;!function(a){var b=function(){function a(a){this.keys=[],this.storage={},this.namespace="",this.setNamespace(a)}return Object.defineProperty(a.prototype,"length",{get:function(){return null!==this.getNameSpaceMatches()?this.getNameSpaceMatches().length:0},enumerable:!0,configurable:!0}),a.prototype.getItem=function(a){return this.getCookiesForNameSpace()[a]||null},a.prototype.setItem=function(a,b){document.cookie=encodeURIComponent(this.namespace+a)+"="+encodeURIComponent(b)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},a.prototype.deleteItem=function(a){document.cookie=encodeURIComponent(this.namespace+a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"},a.prototype.setNamespace=function(a){a&&(this.namespace=a+":",this.reg=new RegExp("^"+this.namespace+"[a-zA-Z0-9]*","g"))},a.prototype.empty=function(){var a=this.getCookiesForNameSpace();for(var b in a)this.deleteItem(b)},a.prototype.getNameSpaceMatches=function(){var a=this,b=decodeURIComponent(document.cookie).split(" ");return b.filter(function(b){return null!==b.match(a.reg)?b.match(a.reg).length>0:!1})},a.prototype.getCookiesForNameSpace=function(){var a=this,b={};return this.getNameSpaceMatches().forEach(function(c){var d=c.replace(a.namespace,"").split("=");b[d[0]]=d[1]}),b},a}();a.CookieStorage=b}(Quartz||(Quartz={}));